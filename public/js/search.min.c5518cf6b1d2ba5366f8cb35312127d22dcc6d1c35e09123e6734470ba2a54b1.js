var searchResults=document.getElementById("js-results-container"),searchInput=document.getElementById("js-search-input"),contextDive=95,timerUserInput=!1;function getCurrentLanguage(){var e=window.location.pathname.split("/").filter(function(e){return e.length>0});return e.length>0&&(e[0]==="en"||e[0]==="nl")?e[0]:"en"}function getIndexPath(){var e=getCurrentLanguage();return"/"+e+"/index.json"}function search(e){for(;searchResults.firstChild;)searchResults.removeChild(searchResults.firstChild);if(e.length===0||e.length<1){searchResults.style.display="none";return}searchResults.style.display="block";var t=getIndexPath();getJSON(t,function(t){var n=[],s=new RegExp(e,"i"),o=getCurrentLanguage();t.forEach(function(e){e.lang===o&&(e.title.match(s)||e.content.match(s))&&n.push(e)}),n.length>0?(searchResults.appendChild(htmlToElement('<h4 class="search-counter">Found: '+n.length+"</h4>")),n.forEach(function(t,n){var s,i,a,l,r=t.content.toLowerCase().indexOf(e.toLowerCase()),c=r+e.length,o=r-contextDive;o>0?(i=t.content.indexOf(" ",o)+1,o=i<r?i:r-contextDive/2):o=0,s=c+contextDive,s<t.content.length?(i=t.content.indexOf(" ",s),i!==-1?s=i:s=c+contextDive/2):s=t.content.length-1,a=t.content.substring(o,s),o!==0&&(a="..."+a),s!==t.content.length-1&&(a=a+"..."),l='<div class="search-results__item" id="search-summary-'+n+'"><a class="search-results__link" href="'+t.permalink+'"><div class="result-title">'+t.title+'</div><span class="search-results-date"><time>'+t.date+"</time></span></a></div>",searchResults.appendChild(htmlToElement(l))})):searchResults.appendChild(htmlToElement('<h3 class="no-results">No results found</h3>'))})}function getJSON(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){n.status===200?t(JSON.parse(n.responseText)):console.error("Error loading "+e+": "+n.status)},n.onerror=function(){console.error("Connection error: "+n.status)},n.send()}function htmlToElement(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}searchInput&&searchInput.addEventListener("keyup",function(){timerUserInput&&clearTimeout(timerUserInput),timerUserInput=setTimeout(function(){search(searchInput.value.trim())},500)})